<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BeSoft – Checkout</title>
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- OPTIONAL: your own colours -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- ================= PROGRESS BAR ================= -->
  <div class="container my-4">
    <nav aria-label="Checkout progress">
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item"><a href="#" class="text-decoration-none">Cart</a></li>
        <li class="breadcrumb-item active" aria-current="page">Checkout</li>
        <li class="breadcrumb-item text-muted">Payment</li>
        <li class="breadcrumb-item text-muted">Review</li>
      </ol>
    </nav>
  </div>

  <!-- ================= MAIN LAYOUT ================= -->
  <div class="container">
    <form id="checkoutForm" novalidate>
      <div class="row g-4">
        <!-- LEFT: Forms  -->
        <div class="col-12 col-lg-7">
          <!-- Customer & Shipping -->
          <section class="card mb-4">
            <div class="card-header bg-transparent"><h5 class="mb-0">User Details</h5></div>
            <div class="card-body">
              <div class="row g-3">
                <!-- full name -->
                <div class="col-12"><div class="form-floating"><input type="text" class="form-control" id="fullname" required><label for="fullname">Full Name</label></div></div>
                <!-- email -->
                <div class="col-12 col-md-6"><div class="form-floating"><input type="email" class="form-control" id="email" required><label for="email">Email</label></div></div>
                <!-- phone -->
                <div class="col-12 col-md-6"><div class="form-floating"><input type="tel" class="form-control" id="phone" required><label for="phone">Phone</label></div></div>
                <!-- address -->
                <div class="col-12"><div class="form-floating"><input type="text" class="form-control" id="address" required><label for="address">Street Address</label></div></div>
                <!-- city -->
                <div class="col-12 col-md-5"><div class="form-floating"><input type="text" class="form-control" id="city" required><label for="city">City</label></div></div>
                <!-- postal -->
                <div class="col-12 col-md-4"><div class="form-floating"><input type="text" class="form-control" id="postal" required><label for="postal">Postal Code</label></div></div>
                <!-- country -->
                <div class="col-12 col-md-3"><div class="form-floating"><select class="form-select" id="country" required><option value="">Country</option><option>Pakistan</option><option>USA</option></select><label for="country">Country</label></div></div>
                <!-- checkbox -->
                <div class="col-12"><div class="form-check"><input class="form-check-input" type="checkbox" id="sameBilling"><label class="form-check-label" for="sameBilling">Billing address is the same</label></div></div>
              </div>
            </div>
          </section>

          <!-- Payment -->
          <section class="card mb-4">
            <div class="card-header bg-transparent"><h5 class="mb-0">Payment Method</h5></div>
            <div class="card-body">
              <div class="form-check mb-2"><input class="form-check-input" type="radio" name="payMethod" id="card" checked><label class="form-check-label" for="card">Credit / Debit Card</label></div>
              <div class="form-check mb-2"><input class="form-check-input" type="radio" name="payMethod" id="cod"><label class="form-check-label" for="cod">Cash on Delivery</label></div>
              <div class="form-check mb-3"><input class="form-check-input" type="radio" name="payMethod" id="wallet"><label class="form-check-label" for="wallet">Digital Wallet</label></div>

              <!-- Card fields (only show when Card is selected) -->
              <div id="cardDetails">
                <div class="row g-3">
                  <div class="col-12"><div class="form-floating"><input type="text" class="form-control" id="cardName"><label for="cardName">Cardholder Name</label></div></div>
                  <div class="col-12"><div class="form-floating"><input type="text" class="form-control" id="cardNum" maxlength="19" placeholder="1234 5678 9012 3456"><label for="cardNum">Card Number</label></div></div>
                  <div class="col-6"><div class="form-floating"><input type="text" class="form-control" id="exp" placeholder="MM/YY"><label for="exp">MM/YY</label></div></div>
                  <div class="col-6"><div class="form-floating"><input type="text" class="form-control" id="cvv" maxlength="3"><label for="cvv">CVV</label></div></div>
                </div>
              </div>
            </div>
          </section>

          <!-- Review & Place -->
          <section class="card mb-4 mb-lg-0">
            <div class="card-body">
              <div class="form-check mb-3"><input class="form-check-input" type="checkbox" id="terms" required><label class="form-check-label" for="terms">I agree to the <a href="#">terms & conditions</a></label><div class="invalid-feedback">You must agree before placing the order.</div></div>
              <button class="btn btn-success btn-lg w-100" type="submit" id="placeOrder" disabled>Place Order</button>
            </div>
          </section>
        </div>

        <!-- RIGHT: Sticky Order Summary -->
        <div class="col-12 col-lg-5">
          <aside class="card position-sticky top-0">
            <div class="card-header bg-transparent"><h5 class="mb-0">Payment Summary</h5></div>
            <div class="card-body">
              <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between"><div><strong>Basic Plan × 1</strong></div><span>$299</span></li>
                <li class="list-group-item d-flex justify-content-between"><div><strong>Extra Module × 2</strong></div><span>$120</span></li>
              </ul>
              <div class="input-group my-3"><input type="text" class="form-control" placeholder="Coupon code"><button class="btn btn-outline-secondary">Apply</button></div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between">Subtotal <span>$419</span></li>
                <li class="list-group-item d-flex justify-content-between">Shipping <span>$0.00</span></li>
                <li class="list-group-item d-flex justify-content-between">Tax <span>$37.71</span></li>
                <li class="list-group-item d-flex justify-content-between fw-bold">Total <span>$456.71</span></li>
              </ul>
            </div>
          </aside>
        </div>
      </div>
    </form>
  </div>

  <!-- Bootstrap JS + validation -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- jQuery 3.7 CDN -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  

<script>
$(function () {

  /* ---------- helper patterns ---------- */
  const emailRegex  = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  const phoneRegex  = /^\d{10,}$/;
  const postalRegex = /^\d{4,6}$/;

  /* ---------- real-time validation ---------- */
  $('#fullname').on('input', () => validateField('#fullname', $('#fullname').val().length >= 3));
  $('#email').on('input', () => validateField('#email', emailRegex.test($('#email').val())));
  $('#phone').on('input', () => validateField('#phone', phoneRegex.test($('#phone').val())));
  $('#address').on('input', () => validateField('#address', $('#address').val().trim() !== ''));
  $('#city').on('input', () => validateField('#city', $('#city').val().trim() !== ''));
  $('#postal').on('input', () => validateField('#postal', postalRegex.test($('#postal').val())));
  $('#country').on('change', () => validateField('#country', $('#country').val() !== ''));

  /* ---------- payment method ---------- */
  $('input[name="payMethod"]').on('change', function () {
    clearRadioError();
    if ($(this).attr('id') === 'card') $('#cardDetails').removeClass('d-none');
    else $('#cardDetails').addClass('d-none');
  });

  /* ---------- card fields (only if card selected) ---------- */
  $('#cardName, #cardNum, #exp, #cvv').on('input', validateCardGroup);

  /* ---------- terms checkbox ---------- */
  $('#terms').on('change', function () {
    $('#placeOrder').prop('disabled', !this.checked);
    validateField('#terms', this.checked);
  });

  /* ---------- submit handler ---------- */
  $('#checkoutForm').on('submit', function (e) {
    e.preventDefault(); // always stop – we control submission
    let ok = true;

    ok &= validateField('#fullname', $('#fullname').val().length >= 3);
    ok &= validateField('#email', emailRegex.test($('#email').val()));
    ok &= validateField('#phone', phoneRegex.test($('#phone').val()));
    ok &= validateField('#address', $('#address').val().trim() !== '');
    ok &= validateField('#city', $('#city').val().trim() !== '');
    ok &= validateField('#postal', postalRegex.test($('#postal').val()));
    ok &= validateField('#country', $('#country').val() !== '');

    ok &= validateRadioGroup();
    if ($('#card').is(':checked')) ok &= validateCardGroup();
    ok &= validateField('#terms', $('#terms').is(':checked'));

    if (!ok) {
      scrollToFirstError();
      return;
    }
    // ----- all good -----
    alert('Form submitted successfully! (replace with real AJAX)');
    // this.submit(); // uncomment when backend ready
  });

  /* ---------- utility functions ---------- */
  function validateField(selector, condition) {
    const $el = $(selector);
    const feedback = $el.siblings('.invalid-feedback');
    if (!feedback.length) { // create block if missing
      $el.after('<div class="invalid-feedback"></div>');
    }
    const $fb = $el.siblings('.invalid-feedback');
    if (condition) {
      $el.removeClass('is-invalid').addClass('is-valid');
      $fb.text('');
    } else {
      $el.removeClass('is-valid').addClass('is-invalid');
      $fb.text(messageMap(selector));
    }
    return condition;
  }

  function validateRadioGroup() {
    const checked = $('input[name="payMethod"]:checked').length;
    if (!checked) {
      if (!$('.payMethod-error').length) {
        $('input[name="payMethod"]').last().closest('.card-body')
          .append('<div class="invalid-feedback payMethod-error">Please select a payment method.</div>');
      }
      $('.payMethod-error').show();
      return false;
    }
    $('.payMethod-error').hide();
    return true;
  }

  function clearRadioError() { $('.payMethod-error').hide(); }

  function validateCardGroup() {
    let ok = true;
    $('#cardName, #cardNum, #exp, #cvv').each(function () {
      ok &= validateField('#' + this.id, $(this).val().trim() !== '');
    });
    return ok;
  }

  function scrollToFirstError() {
    const first = $('.is-invalid').first();
    if (first.length) {
      $('html, body').animate({ scrollTop: first.offset().top - 80 }, 400);
      first.focus();
    }
  }

  function messageMap(sel) {
    const map = {
      '#fullname': 'Full name must be at least 3 characters.',
      '#email': 'Enter a valid email address.',
      '#phone': 'Phone must contain at least 10 digits.',
      '#address': 'Address is required.',
      '#city': 'City is required.',
      '#postal': 'Postal code must be 4–6 digits.',
      '#country': 'Please select a country.',
      '#terms': 'You must accept the terms.'
    };
    return map[sel] || 'This field is required.';
  }
});
</script>



</body>
</html>